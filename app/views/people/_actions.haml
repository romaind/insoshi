#actions
  %table#actions_list
    -if admin? and not @person.active?
      %tr
        %td
          This person is not active
    -if current_person?(@person)
      %tr
        %td
          =link_to image_tag("edit_profile.gif"), edit_person_path(@person)
        %td
          =link_to "Edit my profile", edit_person_path(@person)
    -if current_person.admin?
      %tr
        %td
          = email_link @person
          to everyone
  -else
    -if logged_in?
      -unless Connection.exists?(@person, current_person)
        -if not(current_person?(@person))
          %tr
            %td
              = link_to image_tag("new_contact.gif"), person_connections_path(@person), :method => :post
            %td
              = link_to "Add to contact", person_connections_path(@person), :method => :post
      -if Connection.connected?(@person, current_person)
        %tr
          %td
            = link_to image_tag("del_contact.gif"), connection_path(Connection.conn(current_person, @person)), :method => :delete, :confirm => "Are you sure you want to end connection with #{h @person.name}?"
          %td
            = link_to "Delete from contacts", connection_path(Connection.conn(current_person, @person)), :method => :delete, :confirm => "Are you sure you want to end connection with #{h @person.name}?"
        %tr
          %td
            = email_link @person
        %tr
          %td
            = link_to "#{h @person.name}'s blog", blog_path(@person.blog)
      - if current_person.admin?
        %tr
          %td
          - activity = @person.deactivated? ? "activate" : "deactivate"
          = link_to activity, admin_person_path(@person, :task => "deactivated"), :method => :put